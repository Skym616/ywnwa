<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Trésor de Clara</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cormorant:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        :root {
            --primary: #e4a853;
            --secondary: #6d4423;
            --accent: #3a7564;
            --background: #0d1117;
            --card: #271d10;
            --text: #e9d8b4;
            --gold: #f6c54f;
            --success: #51a380;
            --error: #c24444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        body {
            font-family: 'Cormorant', serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding: 0;
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: url('https://www.transparenttextures.com/patterns/dark-wood.png');
        }
        
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(-30px);
            animation: fadeInDown 1.2s ease forwards 0.5s;
        }
        
        h1 {
            font-family: 'Cinzel Decorative', cursive;
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            color: var(--gold);
            font-weight: 900;
            text-shadow: 0 0 10px rgba(246, 197, 79, 0.5), 0 0 20px rgba(246, 197, 79, 0.3);
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.4rem;
            color: var(--text);
            opacity: 0.9;
            font-weight: 400;
            font-style: italic;
        }
        
        .compass {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            opacity: 0.7;
            animation: rotate 20s linear infinite;
            z-index: 0;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .treasure-map {
            background-color: rgba(20, 12, 5, 0.7);
            border-radius: 1rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5), 0 5px 15px rgba(0, 0, 0, 0.4), inset 0 0 15px rgba(246, 197, 79, 0.1);
            padding: 2rem;
            margin-bottom: 3rem;
            text-align: center;
            overflow: hidden;
            position: relative;
            border: 8px solid transparent;
            border-image: url('https://www.transparenttextures.com/patterns/old-map.png') 20 stretch;
        }
        
        .treasure-map::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://www.transparenttextures.com/patterns/parchment.png');
            opacity: 0.05;
            z-index: -1;
        }
        
        .tableau-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 15px;
            height: 350px;
            perspective: 1000px;
        }
        
        .tableau-piece {
            background-color: var(--card);
            border-radius: 0.5rem;
            opacity: 0.2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel Decorative', cursive;
            font-size: 1.2rem;
            color: transparent;
            background-size: cover;
            background-position: center;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-style: preserve-3d;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(246, 197, 79, 0.2);
        }
        
        .tableau-piece::before {
            content: "?";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: rgba(246, 197, 79, 0.2);
            font-weight: 700;
        }
        
        .tableau-piece.revealed {
            opacity: 1;
            color: var(--gold);
            transform: rotateY(360deg);
            background-color: var(--card);
            box-shadow: 0 10px 25px rgba(246, 197, 79, 0.2), 0 5px 10px rgba(0, 0, 0, 0.4), inset 0 0 15px rgba(246, 197, 79, 0.1);
            border: 1px solid rgba(246, 197, 79, 0.4);
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .tableau-piece.revealed::before {
            content: "";
        }
        
        .enigma-cards {
            margin-top: 4rem;
            margin-bottom: 2rem;
        }
        
        .enigma-container {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            margin-bottom: 1.5rem;
            transition: max-height 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s ease;
            transform-origin: top center;
            perspective: 1000px;
        }
        
        .enigma-container.active {
            max-height: 600px;
            opacity: 1;
        }
        
        .enigma-container.completed {
            max-height: 250px;
        }
        
        .enigma {
            background-color: var(--card);
            border-radius: 1rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(246, 197, 79, 0.3);
            transform-style: preserve-3d;
        }
        
        .enigma::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://www.transparenttextures.com/patterns/old-map.png');
            opacity: 0.1;
            z-index: -1;
        }
        
        .enigma-active {
            animation: cardFloat 3s ease-in-out infinite;
        }
        
        @keyframes cardFloat {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .enigma::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle, rgba(246, 197, 79, 0.4) 0%, rgba(246, 197, 79, 0) 70%);
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        
        .enigma:hover::after {
            opacity: 0.2;
        }
        
        .enigma h3 {
            color: var(--gold);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            font-family: 'Cinzel Decorative', cursive;
            font-size: 1.4rem;
        }
        
        .enigma-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--gold), #9e7c3a);
            color: var(--card);
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 15px;
            font-size: 1.1rem;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3), inset 0 0 5px rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 1;
        }
        
        .enigma-number::before {
            content: "";
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            background: linear-gradient(135deg, #ffd87c, #e4a853);
            border-radius: 50%;
            z-index: -1;
        }
        
        .enigma p {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
            line-height: 1.7;
            color: var(--text);
        }
        
        .enigma-form {
            display: flex;
            gap: 10px;
        }
        
        .enigma-input {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            border: 2px solid rgba(246, 197, 79, 0.3);
            border-radius: 0.5rem;
            font-family: 'Cormorant', serif;
            font-size: 1.1rem;
            outline: none;
            background-color: rgba(10, 10, 10, 0.5);
            color: var(--text);
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .enigma-input:focus {
            border-color: var(--gold);
            box-shadow: 0 0 10px rgba(246, 197, 79, 0.3), inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .enigma-button {
            background: linear-gradient(135deg, var(--gold), #9e7c3a);
            color: var(--card);
            border: none;
            border-radius: 0.5rem;
            padding: 0 1.5rem;
            font-family: 'Cinzel Decorative', cursive;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3), inset 0 0 5px rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .enigma-button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .enigma-button:hover {
            background: linear-gradient(135deg, #ffd87c, #e4a853);
        }
        
        .enigma-button:hover::before {
            left: 100%;
        }
        
        .message {
            margin-top: 1rem;
            padding: 0.8rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            display: none;
        }
        
        .success {
            background-color: rgba(81, 163, 128, 0.3);
            border: 1px solid var(--success);
            display: block;
            animation: glowSuccess 2s infinite alternate;
        }
        
        @keyframes glowSuccess {
            from { box-shadow: 0 0 5px rgba(81, 163, 128, 0.3); }
            to { box-shadow: 0 0 15px rgba(81, 163, 128, 0.6); }
        }
        
        .error {
            background-color: rgba(194, 68, 68, 0.3);
            border: 1px solid var(--error);
            display: block;
            animation: shakeError 0.5s;
        }
        
        @keyframes shakeError {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        .hint {
            margin-top: 0.8rem;
            font-size: 1rem;
            color: var(--gold);
            opacity: 0.7;
            font-style: italic;
            display: none;
            padding: 0.5rem;
            border-left: 2px solid var(--gold);
            animation: fadeIn 1s;
        }
        
        .completion-message {
            display: none;
            text-align: center;
            margin-top: 3rem;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, rgba(228, 168, 83, 0.3), rgba(109, 68, 35, 0.3));
            color: var(--text);
            border-radius: 1rem;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            border: 1px solid rgba(246, 197, 79, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .completion-message::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('https://www.transparenttextures.com/patterns/parchment.png');
            opacity: 0.05;
            z-index: -1;
        }
        
        .completion-message.revealed {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        .congratulations {
            font-family: 'Cinzel Decorative', cursive;
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: var(--gold);
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            position: relative;
            display: inline-block;
        }
        
        .congratulations::after {
            content: "";
            position: absolute;
            left: 50%;
            bottom: -10px;
            width: 80%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            transform: translateX(-50%);
        }
        
        .final-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 2rem auto;
            box-shadow: 0 0 30px rgba(246, 197, 79, 0.5);
            opacity: 0;
            transform: scale(0.8);
            transition: all 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid var(--gold);
            background-image: url('https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=400&h=400&fit=crop');
            background-size: cover;
            background-position: center;
        }
        
        .final-image.revealed {
            opacity: 1;
            transform: scale(1);
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInDown {
            from { 
                opacity: 0;
                transform: translateY(-30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes shine {
            0% { background-position: -100px; }
            40%, 100% { background-position: 300px; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 10px rgba(246, 197, 79, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(246, 197, 79, 0.5); }
            100% { transform: scale(1); box-shadow: 0 0 10px rgba(246, 197, 79, 0.3); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }

        .glow-effect {
            position: relative;
            overflow: hidden;
        }

        .glow-effect::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(246, 197, 79, 0.4) 0%, rgba(246, 197, 79, 0) 70%);
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
            transform: translateZ(0);
        }

        .glow-effect:hover::after {
            opacity: 1;
        }

        /* Media queries pour la responsivité */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2.5rem;
                margin-bottom: 0.3rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .compass {
                width: 60px;
                height: 60px;
                top: 10px;
                right: 10px;
            }
            
            .treasure-map {
                padding: 1.5rem 1rem;
                margin-bottom: 2rem;
            }
            
            .tableau-grid {
                height: 280px;
                gap: 10px;
            }
            
            .enigma-number {
                width: 32px;
                height: 32px;
                line-height: 32px;
                font-size: 0.9rem;
            }
            
            .enigma h3 {
                font-size: 1.2rem;
            }
            
            .enigma p {
                font-size: 1.1rem;
            }
            
            .enigma {
                padding: 1.2rem;
            }
            
            .enigma-form {
                flex-direction: column;
                gap: 8px;
            }
            
            .enigma-button {
                padding: 0.8rem;
                width: 100%;
            }
            
            .congratulations {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 1.9rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .compass {
                width: 50px;
                height: 50px;
            }
            
            .tableau-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(3, 1fr);
                height: 300px;
            }
            
            .tableau-piece {
                font-size: 0.9rem;
            }
            
            .tableau-piece::before {
                font-size: 2rem;
            }
            
            .enigma p {
                font-size: 1rem;
            }
            
            .enigma-input {
                padding: 0.7rem;
                font-size: 1rem;
            }
            
            .hint {
                font-size: 0.9rem;
            }
            
            .final-image {
                width: 150px;
                height: 150px;
            }
            
            /* Amélioration de la taille des zones tactiles pour mobile */
            .enigma-button, .enigma-input {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <div class="container">
        <div class="header">
            <h1>Le Trésor de CLARA FABELLE</h1>
            <p class="subtitle">Un voyage à travers les énigmes pour découvrir un trésor inestimable</p>
            <img class="compass" src="https://cdn-icons-png.flaticon.com/512/188/188035.png" alt="Compass">
        </div>
        
        <div class="treasure-map">
            <div class="tableau-grid">
                <div class="tableau-piece glow-effect" data-index="0"></div>
                <div class="tableau-piece glow-effect" data-index="1"></div>
                <div class="tableau-piece glow-effect" data-index="2"></div>
                <div class="tableau-piece glow-effect" data-index="3"></div>
                <div class="tableau-piece glow-effect" data-index="4"></div>
                <div class="tableau-piece glow-effect" data-index="5"></div>
            </div>
        </div>
        
        <div class="enigma-cards">
            <div id="enigma-1" class="enigma-container active">
                <div class="enigma enigma-active">
                    <h3><span class="enigma-number">1</span>Premier Contact</h3>
                    <p>À première vue, je suis mystérieuse, mais quand on vient vers moi, je m'ouvre comme une fleur. Les gens me trouvent souvent à l'endroit où leur cœur bat plus fort. Qui suis-je?</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: Je suis une confidente qui prend soin de votre âme...</div>
                </div>
            </div>
            
            <div id="enigma-2" class="enigma-container">
                <div class="enigma">
                    <h3><span class="enigma-number">2</span>Frisson d'Aventure</h3>
                    <p>Clara me recherche quand la vie devient trop prévisible. Je fais monter son rythme cardiaque et lui donne des sensations fortes. On me trouve là où la peur rencontre le plaisir.</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: Une montée suivie d'une chute qui fait crier...</div>
                </div>
            </div>
            
            <div id="enigma-3" class="enigma-container">
                <div class="enigma">
                    <h3><span class="enigma-number">3</span>Chaleur Partagée</h3>
                    <p>Je suis là quand Clara aide les autres. Je me répands dans la pièce quand elle écoute avec attention. Je suis communicatif et réconfortant. Qui suis-je?</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: Un geste simple qui illumine le visage...</div>
                </div>
            </div>
            
            <div id="enigma-4" class="enigma-container">
                <div class="enigma">
                    <h3><span class="enigma-number">4</span>Sagesse Nocturne</h3>
                    <p>Clara me partage quand vous avez besoin d'aide. Je peux éclairer votre chemin dans l'obscurité. Je commence par un C et se termine par un L.</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: C'est ce que Clara donne pour aider les autres...</div>
                </div>
            </div>
            
            <div id="enigma-5" class="enigma-container">
                <div class="enigma">
                    <h3><span class="enigma-number">5</span>Sensualité Dévoilée</h3>
                    <p>Je suis l'arme de séduction de Clara. Sans complexe, elle me dévoile avec assurance. Je peux être léger comme une plume ou ardent comme une flamme.</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: Un contact qui fait frissonner...</div>
                </div>
            </div>
            
            <div id="enigma-6" class="enigma-container">
                <div class="enigma">
                    <h3><span class="enigma-number">6</span>Essence de Clara</h3>
                    <p>Pour découvrir qui est vraiment Clara, cherchez le mot qui la définit le mieux. Mystérieuse mais chaleureuse, elle est comme un ____ dans la nuit.</p>
                    <div class="enigma-form">
                        <input type="text" class="enigma-input" placeholder="Votre réponse...">
                        <button class="enigma-button">Vérifier</button>
                    </div>
                    <div class="message"></div>
                    <div class="hint">Indice: Cela brille dans l'obscurité et guide les voyageurs...</div>
                </div>
            </div>
        </div>
        
        <div class="completion-message" id="completion-message">
            <h2 class="congratulations">Trésor Découvert!</h2>
            <p>Vous avez percé les mystères de Clara à travers ses qualités les plus précieuses.</p>
            <div class="final-image" id="final-image"></div>
            <p>Clara, aussi mystérieuse qu'attirante, aussi audacieuse que bienveillante...</p>
            <p>Certains trésors ne sont pas faits d'or, mais de rencontres sincères et de conseils précieux.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configuration des particules
            particlesJS('particles-js', {
                "particles": {
                    "number": {
                        "value": 80,
                        "density": {
                            "enable": true,
                            "value_area": 800
                        }
                    },
                    "color": {
                        "value": "#e4a853"
                    },
                    "shape": {
                        "type": "circle",
                        "stroke": {
                            "width": 0,
                            "color": "#000000"
                        },
                        "polygon": {
                            "nb_sides": 5
                        }
                    },
                    "opacity": {
                        "value": 0.5,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 1,
                            "opacity_min": 0.1,
                            "sync": false
                        }
                    },
                    "size": {
                        "value": 3,
                        "random": true,
                        "anim": {
                            "enable": true,
                            "speed": 2,
                            "size_min": 0.1,
                            "sync": false
                        }
                    },
                    "line_linked": {
                        "enable": true,
                        "distance": 150,
                        "color": "#e4a853",
                        "opacity": 0.2,
                        "width": 1
                    },
                    "move": {
                        "enable": true,
                        "speed": 1,
                        "direction": "none",
                        "random": true,
                        "straight": false,
                        "out_mode": "out",
                        "bounce": false,
                        "attract": {
                            "enable": false,
                            "rotateX": 600,
                            "rotateY": 1200
                        }
                    }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": {
                            "enable": true,
                            "mode": "grab"
                        },
                        "onclick": {
                            "enable": true,
                            "mode": "push"
                        },
                        "resize": true
                    },
                    "modes": {
                        "grab": {
                            "distance": 140,
                            "line_linked": {
                                "opacity": 0.8
                            }
                        },
                        "push": {
                            "particles_nb": 4
                        }
                    }
                },
                "retina_detect": true
            });

            // Configuration des énigmes: numéro, réponse, indice texte pour tableau
            const enigmas = [
                { 
                    number: 1, 
                    answer: "amie", 
                    alternateAnswers: ["amitié", "confidente", "confident", "écoute"], 
                    tableauText: "L'ouverture", 
                    tableauColor: "#854442"
                },
                { 
                    number: 2, 
                    answer: "adrénaline", 
                    alternateAnswers: ["sensations", "aventure", "frisson", "frissons"], 
                    tableauText: "L'aventure", 
                    tableauColor: "#3c6562" 
                },
                { 
                    number: 3, 
                    answer: "sourire", 
                    alternateAnswers: ["bienveillance", "chaleur", "gentillesse"], 
                    tableauText: "La bienveillance", 
                    tableauColor: "#7d5642" 
                },
                { 
                    number: 4, 
                    answer: "conseil", 
                    alternateAnswers: ["conseils", "consultation"], 
                    tableauText: "La sagesse", 
                    tableauColor: "#a76545" 
                },
                { 
                    number: 5, 
                    answer: "regard", 
                    alternateAnswers: ["charme", "toucher", "caresse", "séduction"], 
                    tableauText: "La sensualité", 
                    tableauColor: "#505c44" 
                },
                { 
                    number: 6, 
                    answer: "phare", 
                    alternateAnswers: ["lumière", "étoile", "guide", "flamme"], 
                    tableauText: "Clara", 
                    tableauColor: "#783a57" 
                }
            ];
            
            let solvedEnigmas = Array(enigmas.length).fill(false);
            let attempts = Array(enigmas.length).fill(0);
            
            // Initialisation
            const enigmaContainers = document.querySelectorAll('.enigma-container');
            
            // Marquage de la première énigme active avec l'effet flottant
            updateActiveEnigma();
            
            // Pour chaque énigme, ajoutons des listeners
            enigmaContainers.forEach((container, index) => {
                const input = container.querySelector('.enigma-input');
                const button = container.querySelector('.enigma-button');
                
                button.addEventListener('click', () => {
                    checkAnswer(index + 1, input.value.toLowerCase().trim());
                });
                
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        checkAnswer(index + 1, input.value.toLowerCase().trim());
                    }
                });
                
                // Effet spécial sur focus
                input.addEventListener('focus', function() {
                    this.parentElement.classList.add('glow-effect');
                });
                
                input.addEventListener('blur', function() {
                    this.parentElement.classList.remove('glow-effect');
                });
            });
            
            // Fonction pour vérifier la réponse
            function checkAnswer(enigmaNumber, answer) {
                const index = enigmaNumber - 1;
                const enigma = enigmas[index];
                const container = document.getElementById(`enigma-${enigmaNumber}`);
                const messageEl = container.querySelector('.message');
                const hintEl = container.querySelector('.hint');
                const input = container.querySelector('.enigma-input');
                const enigmaEl = container.querySelector('.enigma');
                
                attempts[index]++;
                
                // Vérifier la réponse
                if (enigma.answer === answer || enigma.alternateAnswers.includes(answer)) {
                    // Réponse correcte
                    solvedEnigmas[index] = true;
                    messageEl.textContent = "Correct! Une partie du trésor se révèle.";
                    messageEl.className = "message success";
                    
                    // Animation de succès sur l'énigme
                    enigmaEl.style.animation = "pulse 1s";
                    setTimeout(() => { enigmaEl.style.animation = ""; }, 1000);
                    
                    // Révéler la partie du tableau avec animation
                    setTimeout(() => {
                        revealTableauPiece(index);
                    }, 500);
                    
                    // Marquer l'énigme comme complétée et retirer l'effet flottant
                    container.classList.add('completed');
                    enigmaEl.classList.remove('enigma-active');
                    
                    // Désactiver l'entrée
                    input.disabled = true;
                    container.querySelector('.enigma-button').disabled = true;
                    
                    // Activer la prochaine énigme si elle existe
                    if (index < enigmas.length - 1) {
                        setTimeout(() => {
                            document.getElementById(`enigma-${enigmaNumber + 1}`).classList.add('active');
                            updateActiveEnigma();
                        }, 1500);
                    }
                    
                    // Vérifier si toutes les énigmes sont résolues
                    checkAllSolved();
                } else {
                    // Réponse incorrecte
                    messageEl.textContent = "Ce n'est pas la bonne réponse. Le trésor reste caché.";
                    messageEl.className = "message error";
                    
                    // Montrer un indice après 3 tentatives
                    if (attempts[index] >= 3) {
                        hintEl.style.display = 'block';
                    }
                    
                    // Animation de secousse sur l'input
                    input.classList.add('shake');
                    setTimeout(() => input.classList.remove('shake'), 500);
                }
            }
            
            // Fonction pour mettre à jour l'énigme active
            function updateActiveEnigma() {
                // Retirer tous les effets flottants
                document.querySelectorAll('.enigma').forEach(e => e.classList.remove('enigma-active'));
                
                // Trouver la première énigme non résolue
                for (let i = 0; i < enigmas.length; i++) {
                    if (!solvedEnigmas[i]) {
                        const activeContainer = document.getElementById(`enigma-${i+1}`);
                        if (activeContainer.classList.contains('active')) {
                            activeContainer.querySelector('.enigma').classList.add('enigma-active');
                        }
                        break;
                    }
                }
            }
            
            // Fonction pour révéler une pièce du tableau
            function revealTableauPiece(index) {
                const tableauPiece = document.querySelector(`.tableau-piece[data-index="${index}"]`);
                
                // Animation de rotation 3D
                tableauPiece.style.transform = 'rotateY(180deg)';
                
                setTimeout(() => {
                    tableauPiece.classList.add('revealed');
                    tableauPiece.style.backgroundColor = enigmas[index].tableauColor;
                    tableauPiece.textContent = enigmas[index].tableauText;
                    tableauPiece.style.transform = 'rotateY(360deg)';
                    
                    // Animation de pulsation
                    setTimeout(() => {
                        tableauPiece.classList.add('pulse');
                        setTimeout(() => {
                            tableauPiece.classList.remove('pulse');
                        }, 3000);
                    }, 800);
                    
                }, 300);
            }
            
            // Vérifier si toutes les énigmes sont résolues
            function checkAllSolved() {
                if (solvedEnigmas.every(solved => solved)) {
                    setTimeout(() => {
                        // Afficher le message final
                        document.getElementById('completion-message').classList.add('revealed');
                        
                        // Révéler l'image finale
                        setTimeout(() => {
                            document.getElementById('final-image').classList.add('revealed');
                            
                            // Lancer un effet d'explosion de particules
                            createConfetti();
                        }, 1000);
                        
                        // Animation finale du tableau
                        const tableauPieces = document.querySelectorAll('.tableau-piece');
                        tableauPieces.forEach((piece, i) => {
                            setTimeout(() => {
                                piece.classList.add('pulse');
                            }, i * 300);
                        });
                    }, 1500);
                }
            }
            
            // Fonction pour créer un effet de confetti
            function createConfetti() {
                const colors = ['#FFD700', '#FFA500', '#FF8C00', '#FF4500'];
                
                for (let i = 0; i < 150; i++) {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.top = '-5vh';
                    confetti.style.width = Math.random() * 10 + 5 + 'px';
                    confetti.style.height = Math.random() * 10 + 5 + 'px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.opacity = Math.random();
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    confetti.style.zIndex = '1000';
                    
                    document.body.appendChild(confetti);
                    
                    const animation = confetti.animate([
                        { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                        { transform: `translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 + window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                    ], {
                        duration: Math.random() * 3000 + 3000,
                        easing: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)'
                    });
                    
                    animation.onfinish = () => {
                        confetti.remove();
                    };
                }
            }

            // Amélioration de l'interaction mobile pour les particules
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                // Réduire le nombre de particules sur mobile pour de meilleures performances
                const particlesConfig = {
                    "particles": {
                        "number": {
                            "value": 40,
                            "density": {
                                "enable": true,
                                "value_area": 800
                            }
                        },
                        // Réduire la complexité pour mobile
                        "line_linked": {
                            "distance": 100,
                            "opacity": 0.15,
                        },
                        "move": {
                            "speed": 0.8,
                        }
                    },
                    "interactivity": {
                        "events": {
                            "onhover": {
                                "enable": false, // Désactiver l'interaction au survol pour mobile
                            }
                        }
                    }
                };
                
                // Mettre à jour la configuration des particules
                particlesJS('particles-js', particlesConfig);
            }
            
            // Ajout d'un gestionnaire pour adapter la taille au redimensionnement
            window.addEventListener('resize', function() {
                // Recalculer les dimensions si nécessaire
                if (window.innerWidth <= 480) {
                    // Ajustements spécifiques pour très petits écrans si nécessaire
                }
            });
        });
    </script>
</body>
</html>
